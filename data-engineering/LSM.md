# LSM
Log Structured Merge Trees

## LSM 이란?
LSM 트리는 불변 파일을 생성하고 순차적으로 병합한다. 각 파일에는 효율적인 데이터 검색을 위한 자체 인덱스를 유지한다.
B Tree 의 대안이라기 보다는 LSM 트리의 인덱스 구조로 B Tree 를 사용하고는 한다.


### LSM 특징
- LSM 트리는 데이터 파일 쓰기를 지연시키고 변경 사항을 메모리 기반 테이블에 저장한다. 그리고 나중에 내용을 불변 디스크 파일에 저장해 변경 사항을 반영한다.
- LSM 트리는 불변 파일을 사용하기 때문에 순차 읽기에 적합하다. (불변 파일은 데이터를 연속된 공간에 저장한다.)

### LSM 트리가 쓰기 작업에 강한 이유
불변 파일 구조에서는 파일은 수정 될 수 없다. 그래서 데이터 삽입, 수정, 삭제 작업에는 디스크에서 레코드를 찾지 않아도 된다.
그래서 쓰기 성능과 처리량이 LSM 구조에서는 향상된다.

### LSM 트리 구조
LSM 트리는 데이터를 메모리 기반 테이블에 먼저 저장하고, 이후에 디스크에 쓰기 위해서는 정렬을 먼저 진행한다. 
이 메모리 기반 테이블, 컴포넌트는 HBase 의 멤테이블 과 같다.


멤테이블 업데이트는 디스크에 접근하지 않기 때문에 디스크 I/O 가 발생하지 않는다. 대신 WAL 을 따로 유지해 레코드의 지속성을 보장한다. 
